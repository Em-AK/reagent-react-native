# WARNING: No longer installs properly!

Running `npm install` in the `react-native` folder as the instructions below tell you will fail. It seems to work if you run `npm install --legacy-peer-deps` but at this point the generated `react-native` folder is 2 years old. I suspect that a lot has changed in the react-native world since then. The CLJS parts remain the same though. I'd advise recreating the `react-native` folder. Basically all you should need is `react-native init NewVersion` and then editing `NewVersion/index.js` in the same way the current `react-native/index.js` was. I have not tested that since I don't do any react-native development myself.

A PR would be welcome if someone wants to take on that update.


```
$ npm install && cd react-native && npm install
$ shadow-cljs watch app

;; wait for first compile to finish or metro gets confused
$ cd react-native

$ npm start
;; and
$ react-native run-android

;; production build
$ shadow-cljs release app

;; Create Android release
$ cd react-native/android
$ ./gradlew assembleRelease
;; APK should appear at android/app/build/outputs/apk/release
;; installs in Android as "Hello App Display Name"
```

## Notes

The `react-native` folder was generated by calling `react-native init AwesomeProject` and renaming the folder.

The `:app` build will create an `react-native/app/index.js`. In `release` mode that is the only file needed. In dev mode the `app` directory will contain many more `.js` files.

`:init-fn` is called after all files are loaded and in the case of `expo` must render something synchronously as it will otherwise complain about a missing root component.

`reagent.core` loads `reagent.dom` which will load `react-dom` which we don't have or need. Including the `src/main/reagent/dom.cljs` to create an empty shell. Copied from [re-natal](https://github.com/drapanjanas/re-natal/blob/master/resources/cljs-reagent6/reagent_dom.cljs).
